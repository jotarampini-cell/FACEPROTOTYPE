/* =========================================
   THE LIVING BENTO GRID (BÃ³veda de Cristal)
   ========================================= */

/* --- LAYOUT SECTION --- */
.bento-vault-section {
    position: relative;
    padding: 60px 0 40px;
    /* Reduced vertical padding */
    background: radial-gradient(circle at 50% 10%, #150f1e 0%, #000000 100%);
    height: 100vh;
    /* Force full viewport height */
    min-height: 700px;
    max-height: 1080px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* Prevent page scrolling */
}

/* Background Atmosphere */
.bento-bg-glow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(circle at 10% 20%, rgba(197, 160, 89, 0.05) 0%, transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(138, 43, 226, 0.05) 0%, transparent 40%);
    pointer-events: none;
    z-index: 0;
}

/* --- HEADER & FILTERS --- */
.vault-header {
    text-align: center;
    margin-bottom: 30px;
    position: relative;
    z-index: 10;
    flex-shrink: 0;
    /* Keep header visible */
}

/* Resusing legacy classes for exact title match */
.galaxy-tag {
    display: inline-block;
    color: #c5a059;
    /* Gold */
    font-size: 0.8rem;
    letter-spacing: 3px;
    font-weight: 700;
    margin-bottom: 15px;
    text-transform: uppercase;
}

.galaxy-title {
    font-family: 'Oswald', sans-serif;
    font-size: clamp(2.5rem, 5vw, 4rem);
    color: #ffffff;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 10px;
    text-transform: uppercase;
}

.galaxy-sub {
    color: rgba(255, 255, 255, 0.7);
    font-size: 1rem;
    max-width: 600px;
    margin: 0 auto;
    margin-bottom: 25px;
}

.vault-filters {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    padding: 0 20px;
}

.filter-btn {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.6);
    padding: 8px 18px;
    border-radius: 30px;
    font-family: 'Montserrat', sans-serif;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-btn:hover,
.filter-btn.active {
    border-color: #c5a059;
    color: #c5a059;
    background: rgba(197, 160, 89, 0.05);
}

/* --- SCROLL WRAPPER (The Magic "One Screen" Fix) --- */
.bento-scroll-wrapper {
    flex-grow: 1;
    overflow-y: auto;
    width: 100%;
    padding-bottom: 40px;

    /* Scrollbar Styling */
    scrollbar-width: thin;
    scrollbar-color: rgba(197, 160, 89, 0.3) rgba(255, 255, 255, 0.05);
}

.bento-scroll-wrapper::-webkit-scrollbar {
    width: 6px;
}

.bento-scroll-wrapper::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

.bento-scroll-wrapper::-webkit-scrollbar-thumb {
    background-color: rgba(197, 160, 89, 0.3);
    border-radius: 20px;
}

/* --- THE GRID (MASONRY-ish) --- */
.bento-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    grid-auto-rows: 200px;
    gap: 20px;
    padding: 10px 40px;
    /* Internal padding */
    max-width: 1400px;
    margin: 0 auto;
}

/* Size Variations (Desktop) */
@media (min-width: 768px) {
    .bento-item.wide {
        grid-column: span 2;
    }

    .bento-item.tall {
        grid-row: span 2;
    }
}

/* --- MOBILE OPTIMIZATIONS --- */
@media (max-width: 767px) {
    .bento-vault-section {
        height: auto;
        min-height: 100vh;
        /* On mobile, we might prefer natural page scroll, or stick to internal. 
           User asked for "one screen" on desktop "like mobile". 
           If mobile is traditionally scrolling, maybe they want horizontal snap?
           OR they want mobile to ALSO be fixed height internal scroll.
           Let's standard Bento: 2 col on mobile grid looks best.
        */
        overflow: visible;
        /* Let mobile scroll naturally? Or enforced? */
    }

    /* If we want strict one-screen on mobile too: */
    .bento-vault-section.strict-mobile {
        height: 100vh;
        overflow: hidden;
    }

    .bento-scroll-wrapper {
        /* If enforcing strict height, keep this. If natural, unset overflow?
           Let's default to internal scroll for consistency. */
        padding-bottom: 80px;
    }

    .bento-grid {
        grid-template-columns: repeat(2, 1fr);
        /* Force 2 columns for "Bento" feel */
        gap: 12px;
        padding: 0 16px;
        grid-auto-rows: 160px;
    }

    .bento-item {
        padding: 15px;
        border-radius: 16px;
    }

    .bento-title {
        font-size: 1.2rem;
    }

    .bento-cat-tag {
        font-size: 0.6rem;
    }

    /* Reset Spans on very small screens if needed, 
       but 2-col with spans works great on modern phones. */
    .bento-item.wide {
        grid-column: span 2;
    }

    .bento-item.tall {
        grid-row: span 2;
    }
}

/* --- BENTO ITEM --- */
.bento-item {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 20px;
    position: relative;
    cursor: pointer;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    padding: 25px;
}

/* Hover Effect: Lift & Glow */
.bento-item:hover {
    transform: translateY(-4px);
    background: rgba(255, 255, 255, 0.07);
    border-color: rgba(197, 160, 89, 0.5);
    /* Gold border */
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
}

/* Inner Layout */
.bento-content {
    position: relative;
    z-index: 2;
    width: 100%;
}

.bento-cat-tag {
    font-size: 0.7rem;
    color: #c5a059;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 8px;
    opacity: 0.8;
}

.bento-title {
    font-family: 'Oswald', sans-serif;
    font-size: 1.8rem;
    color: rgba(255, 255, 255, 0.6);
    line-height: 1.1;
    margin: 0;
    transition: color 0.3s ease;
}

.bento-item:hover .bento-title {
    color: #fff;
}

.hover-reveal {
    margin-top: 15px;
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.8);
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
    border-left: 2px solid #c5a059;
    padding-left: 10px;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.bento-item:hover .hover-reveal {
    opacity: 1;
    transform: translateY(0);
}

/* Corner Icon opacity */
.bento-icon-corner {
    position: absolute;
    bottom: 15px;
    right: 15px;
    color: #fff;
    opacity: 0;
    transition: all 0.3s ease;
    transform: scale(0.8);
}

.bento-item:hover .bento-icon-corner {
    opacity: 0.4;
    transform: scale(1);
}

/* Filtering Animations */
.bento-item.hidden {
    display: none;
}

/* --- LIGHTBOX MODAL --- */
.bento-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    padding: 20px;
}

.bento-modal-overlay.active {
    opacity: 1;
    pointer-events: auto;
}

.bento-modal-content {
    background: #111;
    width: 100%;
    max-width: 600px;
    max-height: 85vh;
    overflow-y: auto;
    border-radius: 20px;
    border: 1px solid #333;
    position: relative;
    padding: 40px;
    box-shadow: 0 0 50px rgba(197, 160, 89, 0.2);
    transform: scale(0.95);
    transition: transform 0.3s ease;
}

.bento-modal-overlay.active .bento-modal-content {
    transform: scale(1);
}

.modal-close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: transparent;
    border: none;
    color: #fff;
    font-size: 2rem;
    cursor: pointer;
    line-height: 1;
    z-index: 20;
}

/* Modal Typography */
.modal-header-cat {
    color: #c5a059;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    display: block;
    margin-bottom: 10px;
}

.modal-big-title {
    font-family: 'Oswald', sans-serif;
    font-size: 2.2rem;
    color: #fff;
    margin-bottom: 30px;
    line-height: 1.1;
}

.modal-section-block {
    margin-bottom: 25px;
    border-left: 1px solid #333;
    padding-left: 15px;
}

.modal-label {
    font-size: 0.75rem;
    color: #666;
    text-transform: uppercase;
    display: block;
    margin-bottom: 5px;
}

.modal-text {
    font-size: 0.95rem;
    color: #ddd;
    line-height: 1.6;
    margin: 0;
}

.modal-lesson-box {
    background: rgba(197, 160, 89, 0.1);
    border: 1px solid rgba(197, 160, 89, 0.3);
    padding: 20px;
    border-radius: 12px;
    margin-top: 30px;
}

.modal-lesson-text {
    font-family: 'Oswald', sans-serif;
    font-size: 1.1rem;
    color: #c5a059;
    text-transform: uppercase;
    text-align: center;
    margin: 0;
}